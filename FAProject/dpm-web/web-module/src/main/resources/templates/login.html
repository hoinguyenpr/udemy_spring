<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org" th:replace="
    ~{layouts/login-layout :: main-fragment(
                                          ~{:: title},
                                          ~{:: #css-page},
                                          ~{:: #custom-css-page},
                                          ~{:: #main-content},  
                                          ~{:: #footer},
                                          ~{:: #custom-js}
                                         )}">

<head>

  <title>Đăng nhập</title>

  <link rel="stylesheet"
    th:href="@{https://cdnjs.cloudflare.com/ajax/libs/jquery-toast-plugin/1.3.2/jquery.toast.css}" />

  <!-- partial:layouts/otherStaticResources.html -->
  <th:block id="css-page" th:replace="~{layouts/mainCss}"></th:block>

  <!-- Custom CSS for this page in here -->
  <th:block id="custom-css-page">

  </th:block>
  <!-- End Custom CSS  -->

</head>

<body>
  <div class="container-scroller">

    <th:block id="main-content">
      <!-- Copy From start to here-->

      <div class="container-fluid page-body-wrapper full-page-wrapper">
        <div class="content-wrapper d-flex align-items-center auth auth-bg-1 theme-one">
          <div class="row w-100 mx-auto">
            <div class="col-lg-4 mx-auto">
              <div class="auto-form-wrapper">
                <form action="/login" method="POST" id="loginForm">
                  <div class="form-group">
                    <label class="label">Username</label>
                    <div class="input-group">
                      <input type="text" name="username" id="username" class="form-control" placeholder="Username"
                        required>
                      <div id="usernameFeedback" class="invalid-feedback">
                        Username is required
                      </div>
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="label">Password</label>
                    <div class="input-group">
                      <input type="password" name="password" id="password" class="form-control" placeholder="*********"
                        required>
                      <div id="paswordFeedback" class="invalid-feedback">
                        Password is required
                      </div>
                    </div>
                  </div>
                  <div class="form-group">
                    <button class="btn btn-primary submit-btn btn-block" id="btnLogin">Login</button>
                  </div>
                  <div class="form-group d-flex justify-content-between">
                    <div class="form-check form-check-flat mt-0">
                      <label class="form-check-label">
                        <input type="checkbox" class="form-check-input" checked>
                        Keep me signed in
                      </label>
                    </div>
                    <a href="#" class="text-small forgot-password text-black">Forgot Password</a>
                  </div>
                </form>
              </div>
              <ul class="auth-footer">
                <li><a href="#">Conditions</a></li>
                <li><a href="#">Help</a></li>
                <li><a href="#">Terms</a></li>
              </ul>
              <p class="footer-text text-center">copyright © 2018 Urbanui. All rights reserved.</p>
            </div>
          </div>
        </div>
        <!-- content-wrapper ends -->
      </div>

      <!-- Copy from here to end-->
    </th:block>
  </div>

  <!-- Custom JavaScript for this page in here -->
  <th:block id="custom-js">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.rawgit.com/PascaleBeier/bootstrap-validate/v2.2.0/dist/bootstrap-validate.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script th:src="@{/js/form-validation.js}"></script>
    <script th:src="@{https://cdnjs.cloudflare.com/ajax/libs/jquery-toast-plugin/1.3.2/jquery.toast.js}"></script>
    <script>
      // bootstrapValidate(['#username', '#password'], 'required:Vui lòng nhập thông tin');

      $(document).ready(function () {
        $('#signinForm').on('submit', function (e) {
          e.preventDefault();
          let isSubmit = true;
          const { username, password } = e.target;
          if (username.value === '') {
            $('#username').addClass('is-invalid');
            isSubmit = false;
          }

          if (password.value === '') {
            $('#password').addClass('is-invalid');
            isSubmit = false;
          }

          if (username.value === 'admin' && password.value === 'admin') {
            window.location.href = 'index.html';
          }

        });

        setDate(new Date().getTime());

      });

      $(document).ready(function () {
        let url = new URLSearchParams(window.location.search);
        if (url.has('error')) {
          if (url.get('error') === "true") {
            showWarningToast();
          }
        }
      })

      showWarningToast = function () {
        'use strict';
        $.toast({
          heading: 'Login failed',
          text: 'Wrong username or password',
          showHideTransition: 'slide',
          icon: 'warning',
          loaderBg: '#57c7d4',
          position: 'top-right'
        })
      };

    </script>

  </th:block>
  <!-- End Custom JavaScript  -->

</body>

</html>